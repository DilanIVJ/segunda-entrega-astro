
---
import "../../styles/globals.css";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
  const posts = (await import("../../data/posts.json")).default;
  return posts.map((p) => ({ params: { slug: p.slug }, props: { post: p } }));
}

const { post } = Astro.props;
---
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{post ? `${post.title} — SodaBlog` : 'Entrada no encontrada — SodaBlog'}</title>
  </head>
  <body>
    <Header />
    <main class="container py-8 prose max-w-3xl">
      {post ? (
        <article>
          <div class="rounded-xl border overflow-hidden mb-6 max-h-56 md:max-h-64">
            <img src={post.cover} alt={post.title} class="w-full h-64 md:h-72 object-cover rounded-xl mx-auto shadow-md" />
          </div>
          <h1>{post.title}</h1>
          <p class="opacity-70 text-sm">{post.date}</p>
          <p class="mt-4">{post.content}</p>
        </article>
      ) : (
        <p>La entrada solicitada no existe.</p>
      )}
    </main>
    <Footer />
  </body>
</html>
